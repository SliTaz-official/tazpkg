<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>
	<title>Руководство TazPKG</title>
	<meta charset="utf-8" />
	<link rel="shortcut icon" href="favicon.ico" />
	<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>

<!-- Header -->
<div id="header">
	<h1>Руководство TazPKG</h1>
</div>

<!-- Start content -->
<div id="content">

<h2>НАЗВАНИЕ</h2>

<p>TazPKG — менеджер пакетов в системе SliTaz GNU/Linux.</p>


<h2>СИНТАКСИС</h2>

<pre>
tazpkg [команда] [пакет|папка|шаблон|список|категория|--опции] [папка|--опции]
</pre>


<h2>ОПИСАНИЕ</h2>

<p>TazPKG — это сверхлегкий (~ 80 КБ) менеджер пакетов, позволяющий
устанавливать, выдавать список, загружать, обновлять и удалять бинарные пакеты
в системе GNU/Linux. TazPKG предоставляет команды для поиска и создания пакетов,
он был создан независимо от проекта. Пакеты с расширением *.tazpkg — это архивы
CPIO, содержащие сжатую при помощи GZip файловую систему, рецепт и
дополнительное описание. TazPKG также управляет зависимостями на основе
рецептов, находящихся в пакетах. Каждый рецепт содержит полную информацию
о пакете, а также может содержать пре- и пост-установочные функции. Тот же самый
рецепт использует Cookutils для компиляции исходников и создания пакетов
<tt>.tazpkg</tt>.</p>

<p>TazPKG разработан полностью с нуля, он написан на скрипте, совместимом
с Bash. TazPKG работает под управлением Ash, который входит в состав проекта
BusyBox. TazPKG распространяется под свободной лицензией GNU GPL v3.</p>


<h2>КОМАНДЫ</h2>


<h3 id="list">list</h3>

<p>Список пакетов, установленных в системе. Эта команда может выводить список
всех установленных пакетов, список категорий, список пакетов определенной
категории, и список пакетов заблокированных от обновления. Вы можете также
использовать команду <tt><a href="#search">search</a></tt> для вывода списка
на основе условия или названия пакета:</p>

<pre>
# tazpkg list
# tazpkg list cat
# tazpkg list <em>категория</em>
# tazpkg list blocked
</pre>


<h3 id="xhtml-list">xhtml-list</h3>

<p>Эта команда сохраняет список всех пакетов, установленных в системе, в файл
формата xHTML для просмотра в браузере. Команду может запускать обычный
пользователь, она создает файл <tt>installed-packages.html</tt> в той папке,
откуда она была запущена. Обратите внимание, что вы можете изменить имя файла
с помощью командной строки:</p>

<pre>
# tazpkg xhtml-list
# tazpkg xhtml-list <em>имя-списка.html</em>
</pre>


<h3 id="list-mirror">list-mirror</h3>

<p>Список пакетов, доступных на зеркале. Эта команда покажет файл
<tt>packages.list</tt>, загруженный с зеркала. Если этого файла нет, вам будет
предложено запустить <code>tazpkg <a href="#recharge">recharge</a></code>
с правами администратора (root), чтобы получить список доступных пакетов.
Параметр <tt>--diff</tt> позволяет отобразить различия между новым и текущим
списками пакетов:</p>

<pre>
# tazpkg list-mirror
# tazpkg list-mirror --diff
</pre>


<h3 id="info">info</h3>

<p>Показать всю информацию по интересующему вас пакету. Информация содержится
в рецепте пакета — его версия, категория, разработчик, сайт и все зависимости
(см. также Cookutils для получения дополнительной информации по рецептам):</p>

<pre>
# tazpkg info <em>busybox</em>
</pre>


<h3 id="desc">desc</h3>

<p>Описание пакета (если оно существует). Эта команда выводит файл
<tt>description.txt</tt> из каждого пакета (простой текстовый файл, шириной до
80 символов, чтобы поместиться в стандартном терминале):</p>

<pre>
# tazpkg desc <em>busybox</em>
</pre>


<h3 id="list-config">list-config</h3>

<p>Список конфигурационных системных файлов. Параметр <tt>--box</tt> отображает
список в виде таблицы:</p>

<pre>
# tazpkg list-config
# tazpkg list-config --box
</pre>


<h3 id="list-files">list-files</h3>

<p>Список всех файлов, которые устанавливаются при установке пакета. Эта команда
просто читает и отображает файл <tt>files.list</tt> каждого пакета (он создается
автоматически при создании пакета, а также используется для удаления файлов при
удалении пакета). Чтобы получить список файлов, установленных пакетом bc:</p>

<pre>
# tazpkg list-files <em>bc</em>
</pre>


<h3 id="search">search</h3>

<p>Поиск пакета по имени владельца или названию пакета. Эта команда будет искать
в списке установленных пакетов и в списке пакетов, доступных на зеркале. Для
того, чтобы получить новейший список пакетов с зеркала, просто запустите
<code>tazpkg recharge</code> перед началом проведения поиска:</p>

<pre>
# tazpkg search <em>gcc</em>
</pre>


<h3 id="search-file">search-file</h3>

<p>Эта команда ищет файл среди всех файлов, которые были установлены с пакетами.
Это бывает очень полезно, когда нужно найти полный путь к файлу или определить,
присутствует ли файл в системе. Пример:</p>

<pre>
$ tazpkg search-file <em>libnss</em>
</pre>


<h3 id="install">install</h3>

<p>Эта команда позволяет устанавливать ранее загруженный пакет с расширением
<tt>.tazpkg</tt>. См. <tt><a href="#get-install">get-install</a></tt>, если вы
хотите установить пакет из интернета. Обратите внимание, что вы можете выполнить
принудительную установку с параметром <tt>--forced</tt>, удалить и
переустановить пакет с параметрами <tt>uninstall</tt> и <tt>reinstall</tt>
соответственно. Также вы можете указать путь к корню файловой системы, в которую
вы хотите установить пакет, с помощью параметра <tt>--root=…</tt>:</p>

<pre>
# tazpkg install <em>пакет-1.0.tazpkg</em>
# tazpkg install <em>путь/к/пакету-1.0.tazpkg</em> --forced
# tazpkg install <em>путь/к/пакету-1.0.tazpkg</em> --root=<em>/mnt/rootfs</em>
</pre>


<h3 id="install-list">install-list<br />
<span id="get-install-list">get-install-list</span></h3>

<p>Установить набор пакетов, перечисленных в файле. Команда
<tt>install-list</tt> позволяет вам установить за один раз несколько ранее
загруженных пакетов, а команда <tt>get-install-list</tt> перед установкой списка
пакетов предварительно загружает их из интернета. Эти команды также понимают
параметр форсированной установки:</p>

<pre>
# tazpkg install-list <em>мои-пакеты.list</em>
# tazpkg get-install-list <em>мои-пакеты.list</em> --forced
</pre>


<h3 id="link">link</h3>

<p>Эта команда позволяет установить пакет, уже установленный на другом носителе.
Установка заключается в создании символьных ссылок и требует очень мало памяти.
Обычно это применяется, когда система работает в оперативной памяти и нужно
установить дополнения с USB-флэш:</p>

<pre>
# tazpkg link <em>openoffice /media/usbdisk</em>
</pre>


<h3 id="remove">remove</h3>

<p>Удалить пакет. Вас спросят о подтверждении (y/N). Эта команда удаляет все
файлы, которые устанавливались в составе пакета. Для просмотра списка файлов,
используйте команду <tt><a href="#list-files">list-files</a></tt> с названием
пакета. Пример удаления пакета bc:</p>

<pre>
# tazpkg remove <em>bc</em>
</pre>


<h3 id="extract">extract</h3>

<p>Распаковать пакет в папку. Если вы не укажете папку назначения, то пакет
будет распакован в папку с именем <tt><em>пакет-версия</em></tt>, которая будет
создана в текущей папке:</p>

<pre>
# tazpkg extract <em>пакет.tazpkg</em>
# tazpkg extract <em>пакет.tazpkg папка/назначения</em>
</pre>


<h3 id="pack">pack</h3>

<p>Эта команда создаст пакет из заранее подготовленной папки или из
распакованного пакета. Используя эту команду вы можете создать пакет .tazpkg
вручную (см. документацию Cookutils по вопросу автоматического создания пакетов).
Упаковать пакет:</p>

<pre>
# tazpkg pack <em>пакет-версия</em>
</pre>


<h3 id="repack">repack</h3>

<p>Эта команда позволяет восстановить пакет из файлов в системе, где он был
ранее установлен. Переупаковать пакет:</p>

<pre>
# tazpkg repack <em>пакет</em>
</pre>


<h3 id="repack-config">repack-config</h3>

<p>Эта команда воссоздает пакет с конфигурационными системными файлами (см.
<tt><a href="#list-config">list-config</a></tt>). Для того, чтобы восстановить
текущую конфигурацию, потом достаточно будет установить созданный пакет.
Упаковать конфигурационные файлы:</p>

<pre>
# tazpkg repack-config
</pre>


<h3 id="recharge">recharge</h3>

<p>Обновление списка пакетов, доступных на зеркале. Эта команда загрузит с
зеркала самый последний список устанавливаемых пакетов <tt>packages.list</tt> и,
прежде чем продолжить, сохранит старый список. После обновления списка, вы
можете использовать команды <tt><a href="#list">list</a></tt> и
<tt><a href="#search">search</a></tt>. Для просмотра списка различий используйте
команду <code>list-mirror --diff</code>, а для просмотра и обновления пакетов
просто скомандуйте <tt><a href="#upgrade">upgrade</a></tt>. Обновить список
пакетов:</p>

<pre>
# tazpkg recharge
</pre>


<h3 id="up">up<br />
<span id="upgrade">upgrade</span></h3>

<p>Команда позволяет обновить все установленные пакеты, доступные на текущем
зеркале. Обновление пакетов — важная составляющая безопасности системы, и вы
можете чувствовать себя в безопасности с последними обновлениями и
исправлениями. Хотя проект SliTaz и крохотный, но он обеспечивает регулярные
обновления по безопасности и как правило, предоставляет последние версии ПО.
Обратите внимание, что эта функция предназначена для людей, установивших SliTaz
на жесткий диск. Обновленные пакеты в режиме LiveCD, будут потеряны при
выключении системы. Обновить или показать все параметры команды <tt>up</tt>:</p>

<pre>
# tazpkg up
# tazpkg --help-up
# tazpkg up --recharge --install
# tazpkg up -r -i
</pre>


<h3 id="check">check</h3>

<p>Эта команда может проверить зависимости установленных пакетов и определить,
все ли файлы, необходимые для переупаковки пакета присутствуют:</p>

<pre>
# tazpkg check <em>пакет</em>
</pre>


<h3 id="block">block<br />
<span id="unblock">unblock</span></h3>

<p>Команды позволяют вам блокировать и разблокировать установленную версию
пакета. Заблокированный пакет не будет обновляться командой
<tt><a href="#upgrade">upgrade</a></tt>. Список заблокированных пакетов
находится в файле <tt>/var/lib/tazpkg/blocked-packages.list</tt>. Этот файл
также можно отредактировать вручную. Для блокирования или разблокирования пакета
Grub:</p>

<pre>
# tazpkg block <em>grub</em>
# tazpkg unblock <em>grub</em>
</pre>


<h3 id="get">get</h3>

<p>Загрузить пакет с зеркала (если он существует). Загруженный пакет сохраняется
в текущей папке. Чтобы узнать текущий путь, вы можете использовать команду
<code>pwd</code>. Для загрузки пакета Grub:</p>

<pre>
# tazpkg get <em>grub</em>
</pre>


<h3 id="get-install">get-install</h3>

<p>Загрузить и установить пакет с зеркала в интернете. Эта команда сначала
проверяет, существует ли пакет на зеркале и был ли он уже загружен. Для
получения списка пакетов на зеркале, используйте команду
<tt><a href="#list-mirror">list-mirror</a></tt>. Для установки пакета Grub:</p>

<pre>
# tazpkg get-install <em>grub</em>
</pre>


<h3 id="clean-cache">clean-cache</h3>

<p>Удалить пакеты *.tazpkg, загруженные в кэш. Во время установки TazPKG
сохраняет копии пакетов, загруженных из интернета. Это сделано для того, чтобы
сохранить трафик в случае переустановки, но вы можете захотеть освободить место
на жестком диске или повторно загрузить пакеты:</p>

<pre>
# tazpkg clean-cache
</pre>


<h3 id="setup-mirror">setup-mirror</h3>

<p>Установка адреса зеркала. Эта команда запросит URL нового зеркала. Можно
указать несколько адресов, разделенных пробелами. Обратите внимание, что вы
также можете изменить основной файл <tt>/var/lib/tazpkg/mirror</tt>. URL-адрес
должен указывать на папку, содержащую пакеты и файл <tt>packages.list</tt>:</p>

<pre>
# tazpkg setup-mirror
</pre>


<h3 id="reconfigure">reconfigure</h3>

<p>Повторяет пост-установочный скрипт из пакета. Пример использования для
GCC:</p>

<pre>
# tazpkg reconfigure <em>gcc</em>
</pre>


<h3 id="depends">depends<br />
<span id="rdepends">rdepends</span></h3>

<p>Отображает дерево зависимостей и обратное дерево зависимостей пакета,
соответственно. Пример использования для MPD:</p>

<pre>
# tazpkg depends <em>mpd</em>
# tazpkg rdepends <em>mpd</em>
</pre>


<h3 id="add-undigest">add-undigest<br />
<span id="setup-undigest">setup-undigest</span></h3>

<p>Устанавливает адрес дополнительного неофициального зеркала для тестирования
пакетов, которые еще не присутствуют на официальных зеркалах. Обратите внимание,
вы можете также вручную редактировать файлы в
<tt>/var/lib/tazpkg/undigest/<em>имя_репозитория</em></tt>. URL-адрес должен
указывать на папку, содержащую пакеты и файл <tt>packages.list</tt>:</p>

<pre>
# tazpkg add-undigest <em>public-repository http://my.home.org/slitaz</em>
# tazpkg setup-undigest <em>local-repository /home/slitaz/packages</em>
</pre>


<h3 id="remove-undigest">remove-undigest</h3>

<p>Удаляет адрес неофициального зеркала:</p>

<pre>
# tazpkg remove-undigest <em>my-repository</em>
</pre>


<h3 id="list-undigest">list-undigest</h3>

<p>Список дополнительных неофициальных зеркал:</p>

<pre>
# tazpkg list-undigest
</pre>


<h3 id="convert">convert</h3>

<p>Преобразует пакеты Debian (.deb), Redhat (.rpm), Slackware (.tgz) и Archlinux
(.pkg.tar.gz) в пакеты SliTaz (.tazpkg):</p>

<pre>
# tazpkg convert <em>чужой-пакет</em>
</pre>


<h3 id="set-release">set-release</h3>

<p>Эта команда меняет текущую версию и обновляет все пакеты до последнего релиза
выбранной версии:</p>

<pre>
# tazpkg set-release <em>cooking</em>
</pre>


<h3 id="bugs">bugs</h3>

<p>Генерирует список известных ошибок в пакетах:</p>

<pre>
# tazpkg bugs
</pre>


<h2>МЭЙНТЕЙНЕР</h2>

<p>Christophe Lincoln &lt;pankso at slitaz.org&gt;</p>

</div>
<!-- End content -->
</body>
</html>

